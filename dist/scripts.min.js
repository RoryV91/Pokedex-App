const pokemonRepository=function(){let e=[];function t(t){e.push(t)}function n(e){return new Promise(((t,n)=>{const o=new Image;o.src=e,o.onload=t,o.onerror=n}))}function o(e){let t=e.detailsUrl;return fetch(t).then((function(e){return e.json()})).then((function(t){e.frontImageUrl=t.sprites.other["official-artwork"].front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.id=t.id,e.abilities=t.abilities,e.stats=t.stats})).catch((function(e){console.error(e)}))}function a(e,t){o(e).then((function(){l(e,t)}))}function l(e,t){let n=document.querySelector("#modal-container");$(".modal.show").length>0&&$(".modal.show").modal("hide");let o=document.createElement("div");o.classList.add("modal","fade","custom-border"),o.id=`pokemonModal-${e.id}`,o.setAttribute("tabindex","-1"),o.setAttribute("aria-labelledby","exampleModalLabel"),o.setAttribute("aria-hidden","true");let a=document.createElement("div");a.classList.add("modal-dialog");let l=document.createElement("div");l.classList.add("modal-content","custom-border");const d=e.types.map((e=>e.type.name));if(1===d.length)l.style.backgroundColor=`var(--${d[0]}-color)`;else{const e=`linear-gradient(45deg, ${d.map((e=>`var(--${e}-color)`)).join(", ")})`;l.style.backgroundImage=e}let i=document.createElement("div");i.classList.add("modal-header","custom-border"),l.appendChild(i);let c=document.createElement("p");c.classList.add("modal-id","mr-auto"),c.innerText=`#${e.id}`,i.appendChild(c);let m=document.createElement("h5");m.classList.add("modal-title","pokemon-name","mx-auto"),m.innerText=r(s(e.name)),i.appendChild(m);let u=document.createElement("button");u.type="button",u.classList.add("close"),u.setAttribute("data-dismiss","modal"),u.setAttribute("aria-label","Close"),u.innerHTML="&times;",i.appendChild(u);let p=document.createElement("div");p.classList.add("modal-body");let h=document.createElement("img");h.classList.add("pokemon-image","mx-auto","d-block","border","mb-3"),h.src=e.frontImageUrl,p.appendChild(h);let y=document.createElement("p");y.classList.add("pokemon-types"),y.textContent="Types: "+e.types.map((e=>r(e.type.name))).join(", "),p.appendChild(y);let b=document.createElement("p");b.classList.add("pokemon-abilities"),b.textContent="Abilities: "+e.abilities.map((e=>r(e.ability.name))).join(", "),p.appendChild(b);let g=document.createElement("table");g.classList.add("table"),g.classList.add("table-bordered");let f=document.createElement("tbody");g.appendChild(f),e.stats.forEach((e=>{let t=document.createElement("tr");f.appendChild(t);let n=document.createElement("td");n.textContent=r(e.stat.name),t.appendChild(n);let o=document.createElement("td");o.textContent=e.base_stat,t.appendChild(o)})),p.appendChild(g),l.appendChild(p),a.appendChild(l),o.appendChild(a),n.appendChild(o),$(o).on("shown.bs.modal",(function(){c.focus()})),$(o).on("hidden.bs.modal",(function(){o.remove(),t.focus()})),$(o).modal("show")}function d(){document.querySelector("#modal-container").classList.remove("is-visible")}function i(){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;document.getElementById("dark-mode-toggle").checked=e,e?(document.documentElement.style.setProperty("--background","var(--background-dark)"),document.documentElement.style.setProperty("--text","var(--text-dark)")):(document.documentElement.style.setProperty("--background","var(--background-light)"),document.documentElement.style.setProperty("--text","var(--text-light)"))}window.addEventListener("keydown",(e=>{let t=document.querySelector("#modal-container");"Escape"===e.key&&t.classList.contains("is-visible")&&d()})),i(),window.matchMedia("(prefers-color-scheme: dark)").addListener(i);function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){return"mr-mime"===e?"Mr. Mime":"mr-rime"===e?"Mr. Rime":"mime-jr"===e?"Mime Jr.":e.replace(/-m(?!.)$/," ♂").replace(/-f(?!.)$/," ♀").replace(/(^\w+)-(\w+)/,((e,t,n)=>`${r(t)} ${r(n)}`))}document.getElementById("dark-mode-toggle").addEventListener("change",(function(){this.checked?(document.documentElement.style.setProperty("--background","var(--background-dark)"),document.documentElement.style.setProperty("--text","var(--text-dark)")):(document.documentElement.style.setProperty("--background","var(--background-light)"),document.documentElement.style.setProperty("--text","var(--text-light)"))})),document.querySelectorAll(".nav-link").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("data-section"),n=document.querySelector(`#${t}`);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}))}));return document.querySelectorAll(".generation-link").forEach((function(e){e.addEventListener("click",(async function(e){e.preventDefault();document.getElementById("loading-screen").style.display="block";const t=parseInt(this.getAttribute("data-offset")),n=parseInt(this.getAttribute("data-limit"));pokemonRepository.removeListItems(),await pokemonRepository.loadList(t,n),pokemonRepository.getAll().forEach((function(e){pokemonRepository.addListItem(e)}))}))})),{add:t,getAll:function(){return e},addListItem:function(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li");n.classList.add("col-12","col-sm-6","col-md-4","col-lg-3","mb-3","list-unstyled","text-center");let o=document.createElement("button"),l=document.createElement("img");l.setAttribute("src",e.thumbnailUrl),l.setAttribute("alt",`${r(s(e.name))} thumbnail`),o.innerText=`#${e.id}\n`+r(s(e.name))+"\n",o.classList.add("pokemon-button","btn-block"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#pokemonModal"),o.appendChild(l),n.appendChild(o),t.appendChild(n),o.addEventListener("click",(function(t){a(e,o)}))},removeListItems:function(){const t=document.querySelector(".pokemon-list");if(t)for(;t.firstChild;)t.removeChild(t.firstChild);e=[]},showDetails:a,preloadThumbnailImage:n,loadList:async function(o,a){const l=document.getElementById("loading-backdrop"),d=document.getElementById("loading-spinner"),i=document.querySelector(".spinner-percentage"),r=document.getElementById("loading-screen");l.style.display="block",d.style.display="block";const s=`https://pokeapi.co/api/v2/pokemon/?offset=${o}&limit=${a}`;let c=0;try{e=[];const o=await fetch(s),l=await o.json();for(const e of l.results){try{await n(`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${e.url.split("/")[6]}.png`)}catch(e){console.error("Error preloading image:",e);continue}t({name:e.name,id:e.url.split("/")[6],detailsUrl:e.url,thumbnailUrl:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${e.url.split("/")[6]}.png`}),c++;const o=Math.round(c/a*100);i.textContent=`${o}%`}r.style.display="none"}catch(e){console.error(e),r.style.display="none"}},loadDetails:o,showModal:l,hideModal:d,replaceGenderSymbols:s,capitalizeFirstLetter:r}}();pokemonRepository.loadList(0,151).then((function(){pokemonRepository.getAll().forEach((function(e){pokemonRepository.addListItem(e)}))}));